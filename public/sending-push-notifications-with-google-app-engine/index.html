<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Sending push notifications with Google App Engine | Stipe Grbić</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="When I built a Windows Phone application for local weather forecast it was naturally to implement push notifications – because you know how hard it is for users to manually check if new weather inform">
<meta property="og:type" content="article">
<meta property="og:title" content="Sending push notifications with Google App Engine">
<meta property="og:url" content="http://stipegrbic.github.io/sending-push-notifications-with-google-app-engine/index.html">
<meta property="og:site_name" content="Stipe Grbić">
<meta property="og:description" content="When I built a Windows Phone application for local weather forecast it was naturally to implement push notifications – because you know how hard it is for users to manually check if new weather inform">
<meta property="og:updated_time" content="2015-11-05T10:34:50.616Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sending push notifications with Google App Engine">
<meta name="twitter:description" content="When I built a Windows Phone application for local weather forecast it was naturally to implement push notifications – because you know how hard it is for users to manually check if new weather inform">
  
  
  

  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css" type="text/css">
  

  

  
</head>
<body>
  <div id="container">
    <header id="header">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="/" id="logo"><span class="site-title">Stipe Grbić</span></a>
      <nav id="main-nav">
        
      </nav>
      
    </div>
  </div>
  <div id="main-nav-mobile" class="header-sub header-inner">
    <table class="menu outer">
      <tr>
        
      </tr>
    </table>
  </div>
</header>

    <div class="outer">
      
      <section id="main"><article id="post-sending-push-notifications-with-google-app-engine" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Sending push notifications with Google App Engine
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/sending-push-notifications-with-google-app-engine/">
      <time datetime="2014-05-01T18:17:48.000Z" itemprop="datePublished">2014-05-01</time>
    </a>
  </div>


          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>When I built a Windows Phone application for local weather forecast it was naturally to implement push notifications – because you know how hard it is for users to manually check if new weather information is available. So, the question was how to do it – simple, fast and for free?<br><a id="more"></a></p>
<h3 id="Solution">Solution</h3><p>There’s a service from Google called App Engine which enables you to make web applications in Java or Python and host them on their servers for free. There are a lot of constraints which they had to make in order to make it free to use for everyone, but for application of this purpose there weren’t too many obstacles to make it work.</p>
<h3 id="Problems">Problems</h3><p>I won’t write about building a web application here, but rather about a problems I came across. So, once I’ve made it and put it to service it was working OK before first problem came up – a request to send notifications was taking too much time. Google App Engine runs applications in a sandbox environment which means you don’t have much freedom there. The constraint that was a problem was that each request has only 60 seconds to finish before it’s terminated. As I knew that sending a notification usually doesn’t take too long, only a fraction of a second I was thinking that even with thousands of users it shouldn’t be a problem. But, as I looked at the logs I saw that sometimes it takes a few seconds and then it fails. That’s when URL is not available and notification is not possible to send. There’s nothing you can do about it because Microsoft is responsible for delivering notifications to users. But here are a few things you can do about this problem:</p>
<ul>
<li><p>When a notification URL of a user changes, delete old URL. Not only because it will clear unnecessary data, but it will also make sending notifications faster because your server won’t be trying to send a notification to an old URL.</p>
</li>
<li><p>Use asynchronous requests. All requests to external resources go through URL Fetch service, but it allows you to fetch URLs asynchronously. You should use that feature not to block your thread when calling thousands of notification URLs. One thing to remember is that a request has only 60 seconds to finish and no thread cannot outlive a request that started it.</p>
</li>
<li><p>Don’t delete URLs that failed once. I thought that URL that failed is safe to delete because it’s not working and it’s probably some old URL. That was wrong as it lead to deletion of a lot of URLs that were active and users couldn’t receive notifications until their URL changed.</p>
</li>
</ul>
<p>In general Google App Engine works great for this purpose. It’s simple to use, reliable and free, but it has quite a lot of limitations which could make a problem for some other application. This is understandable because even Google doesn’t have unlimited resources and when you use something for free, you don’t really have the right to complain about it :)</p>

      
    </div>
    <footer class="article-footer">
<<<<<<< HEAD
      <a data-url="http://stipegrbic.herokuapp.com/sending-push-notifications-with-google-app-engine/" data-id="cih2bruxr0008kckuofkac56m" class="article-share-link">Share</a>
=======
      <a data-url="http://stipegrbic.github.io/sending-push-notifications-with-google-app-engine/" data-id="cigup5wag0008iknlmwia7jl3" class="article-share-link">Share</a>
>>>>>>> 4547175a77721016a8fc4f80923bd68973e2d270
      
        <a href="http://stipegrbic.github.io/sending-push-notifications-with-google-app-engine/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/google-app-engine/">google app engine</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/windows-phone/">windows phone</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/working-with-manipulation-events-on-windows-phone/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Working with manipulation events on Windows Phone
        
      </div>
    </a>
  
  
</nav>


  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</section>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 Stipe Grbić<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
    </div>
  </div>
</footer>
    

<script>
  var disqus_shortname = 'stipegrbic';
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>







<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>